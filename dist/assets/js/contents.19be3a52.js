(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{47:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var r=JSON.parse('{\n\t"apiKey": "AIzaSyDZpNEsHUILTJSJixyoGzaB04K8Kcp6CPU",\n\t"authDomain": "remtori.firebaseapp.com",\n\t"databaseURL": "https://remtori.firebaseio.com",\n\t"projectId": "remtori",\n\t"storageBucket": "remtori.appspot.com",\n\t"messagingSenderId": "65013389724",\n\t"appId": "1:65013389724:web:bf3e07dfb003f314"\n}'),a=function(t){return"https://storage.googleapis.com/".concat(r.storageBucket,"/").concat(t)}},56:function(t,e,n){t.exports=JSON.parse('{"listStyle":"b3G3","listItem":"_2Aoq","titleWrapper":"_1SOF","authorAndTime":"_8Ho1","author":"_2peQ","tags":"_3eVU","icon":"Wh1k","error":"FeoD","content":"_2TWb","contentContainer":"_2bWf","edit":"_34Mz","coverImg":"bqA2","desc":"_2yzh","timeAdded":"J_ko"}')},57:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return s}));var r=n(47);const a=["stringValue","integerValue","booleanValue","timestampValue"];function o(t){for(const e of a)if(t[e])return t[e];if(t.arrayValue)return t.arrayValue.values.map(o);if(t.mapValue){const e={};for(const n in t.mapValue.fields)e[n]=o(t.mapValue.fields[n]);return e}return t}const i=`https://firestore.googleapis.com/v1/projects/${r.a.projectId}/databases/(default)/documents`,c=t=>{if(200!==t.status)throw t.json();return t.json()};function l(t){return fetch(`${i}/blogs/${t}`).then(c).then(({fields:t})=>o({mapValue:{fields:t}}))}function s({startAfter:t,tag:e}={}){let n='{"structuredQuery":{"from":[{"collectionId":"blogs"}],\n\t\t"where":{"compositeFilter":{"op":"AND","filters":[\n\t\t{"fieldFilter":{"field":{"fieldPath":"public"},"op":"EQUAL","value":{"booleanValue":true}}}';return null!=e&&(n+=`,{"fieldFilter":{"field":{"fieldPath":"tags"},"op":"ARRAY_CONTAINS","value":{"stringValue":"${e}"}}}`),n+=']}},"orderBy":[{"field":{"fieldPath":"timestamp"},"direction":"DESCENDING"},{"field":{"fieldPath":"__name__"},"direction":"DESCENDING"}],"limit":10',null!=t&&(n+=`,"startAt":{"before":false,"values":[{"timestampValue":"${t}"}]}`),n+="}}",fetch(`${i}:runQuery`,{method:"POST",body:n}).then(c).then(t=>t[0].document?t.map(({document:{fields:t}})=>o({mapValue:{fields:t}})):[])}},67:function(t,e,n){},78:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return m}));var r=n(0),a=n(1),o=n(23),i=n(47),c=n(15),l=n(57),s=n(3),u=n(56),f=n.n(u),h=(n(67),n(13)),d=n(4);function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(t){return{__html:t.length&&200===t[0]?t[1]:"\n\t\t\t\t<div>Can not load this blog :((</div>\n\t\t\t\t<details class=".concat(f.a.error,">\n\t\t\t\t\t<summary>More Info</summary>\n\t\t\t\t\t<textarea rows=10 cols=50>\n\t\t\t\t\t\t").concat(t.length?t[1]:t,"\n\t\t\t\t\t</textarea>\n\t\t\t\t</details>\n\t\t\t")}}function m(t){var e=t.id,n=p(Object(a.j)({__html:""}),2),u=n[0],m=n[1],g=p(Object(a.j)(null),2),y=g[0],v=g[1],O=Object(o.b)((function(t){return t.auth.user}));return Object(a.d)((function(){v(null),m({__html:""}),Object(l.a)(e).then(v).catch((function(){})),fetch(Object(i.b)("blogs/".concat(e,".html"))).then((function(t){return Promise.all([t.status,t.text()])})).then((function(t){return m(b(t))})).catch((function(t){return m(b(t))}))}),[e]),0===u.__html.length?Object(r.h)(c.a,null):null==y||y.shouldWrapContent?Object(r.h)("div",{class:f.a.content,dangerouslySetInnerHTML:u}):Object(r.h)("div",{class:f.a.contentContainer},O&&O.isAdmin?Object(r.h)(d.Link,{class:f.a.edit,href:"/blogs/".concat(e,"/edit")},Object(r.h)(s.a,{icon:s.b.faEdit}),Object(r.h)("span",null,"Edit")):Object(r.h)("div",{class:f.a.edit}),Object(r.h)("h1",null,y.title),Object(r.h)("span",{class:f.a.timeAdded},Object(r.h)(s.a,{class:f.a.icon,icon:s.b.faClock}),new Date(y.timestamp).toDateString()),Object(r.h)("div",{class:f.a.desc},y.description),Object(r.h)(h.a,{class:f.a.coverImg,src:y.previewImg.url}),Object(r.h)("div",{class:f.a.content,dangerouslySetInnerHTML:u}),Object(r.h)("div",{class:f.a.tags},Object(r.h)(s.a,{class:f.a.icon,icon:s.b.faTags}),null==y?void 0:y.tags.map((function(t,n){return Object(r.h)("a",{key:"".concat(e).concat(n),href:"/blogs?tag=".concat(t)},t)}))))}},80:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(4),o=n(56),i=n.n(o),c=n(13),l=n(3),s=n(15),u=n(57),f=n(24),h=n(21);function d(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t){var e=[],n=t,r=!0;return{hasMore:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return r})),getNextData:function(){var t,a={startAfter:e.length>0?e[e.length-1].timestamp:void 0,tag:n},o=function(t){var e=t.startAfter,n=t.tag,r=h.a.getState().blogs,a=e||(new Date).toISOString,o=[];for(var i in r)(null==n||r[i].tags.indexOf(n)>=0)&&o.push(r[i]);o.sort((function(t,e){return t.timestamp>e.timestamp?-1:1}));for(var c=0;c<o.length;c++)if(a>o[c].timestamp)return o.slice(c);return[]}(a);return o.length>=10||!navigator.onLine?((t=e).push.apply(t,d(o)),Promise.resolve(e)):Object(u.b)(a).then((function(t){var n;return h.a.dispatch({type:f.a,blogs:t}),0===t.length?r=!1:(n=e).push.apply(n,d(t)),e}))},reset:function(t){e=[],n=t}}}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var O=function(t){function e(t){var n,r,a,o,i,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,n=!(a=g(e).apply(this,arguments))||"object"!==b(a)&&"function"!=typeof a?y(r):a,o=y(n),c=!0,(i="isMounted")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n.state={list:null,resource:p(t.matches.tag),shouldFetchData:!0,isFetching:!1},n.infiniteScrollHandler=n.infiniteScrollHandler.bind(y(n)),n}var n,a,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,t),n=e,(a=[{key:"componentWillReceiveProps",value:function(t){this.props.matches.tag!==t.matches.tag&&(window.scroll(0,0),this.state.resource.reset(t.matches.tag),this.fetchData())}},{key:"componentDidMount",value:function(){this.fetchData(),window.addEventListener("scroll",this.infiniteScrollHandler)}},{key:"componentWillUnmount",value:function(){this.isMounted=!1,window.removeEventListener("scroll",this.infiniteScrollHandler)}},{key:"infiniteScrollHandler",value:function(){var t=document.documentElement;!this.state.isFetching&&this.state.resource.hasMore()&&t.scrollHeight-(t.scrollTop+t.clientHeight)<150&&this.fetchData()}},{key:"fetchData",value:function(){var t=this;this.setState({isFetching:!0,shouldFetchData:!1}),this.state.resource.getNextData().then((function(e){return t.isMounted&&t.setState({list:e,isFetching:!1})}))}},{key:"render",value:function(t,e){var n=e.list,a=e.isFetching;return null==n?Object(r.h)(s.a,null):0===n.length?Object(r.h)("div",null,"Empty :("):Object(r.h)("div",{class:i.a.listStyle},n.map((function(e,n){return Object(r.h)(j,{key:"".concat(t.matches.tag,"-").concat(n),data:e})})),a&&Object(r.h)(s.a,null))}}])&&m(n.prototype,a),o&&m(n,o),e}(r.Component),j=function(t){var e=t.data,n=e.author,o=e.description,s=e.key,u=e.previewImg,f=e.tags,h=e.timestamp,d=e.title;return Object(r.h)("div",{class:i.a.listItem,"data-key":s},Object(r.h)("div",null,Object(r.h)(a.Link,{href:"/blogs/".concat(s)},Object(r.h)(c.a,{src:u.url,width:u.width,height:u.height})),Object(r.h)("div",{class:i.a.authorAndTime},Object(r.h)("span",{class:i.a.author},Object(r.h)(l.a,{class:i.a.icon,icon:l.b.faUser}),n),Object(r.h)("span",null,Object(r.h)(l.a,{class:i.a.icon,icon:l.b.faClock}),new Date(h).toDateString())),Object(r.h)("div",{class:i.a.tags},Object(r.h)(l.a,{class:i.a.icon,icon:l.b.faTags}),f.map((function(t,e){return Object(r.h)("a",{key:"".concat(s).concat(e),href:"/blogs?tag=".concat(t)},t)})))),Object(r.h)("div",null,Object(r.h)(a.Link,{class:i.a.titleWrapper,href:"/blogs/".concat(s)},d),Object(r.h)("div",null,o)))};n.d(e,"default",(function(){return O}))}}]);